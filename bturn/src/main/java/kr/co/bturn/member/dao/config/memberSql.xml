<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.co.bturn.member.dao.config.memberSql">

	<insert id="insertMember" parameterType="kr.co.bturn.member.model.MemberDTO">
		insert into /* memberSql.xml insertMember 2015.09.20 이원희 */
			bt_member
					(
						mem_no,
						mem_id,
						mem_pwd,
						mem_email,
						mem_tel,
						mem_phone,
						mem_addr,
						mem_birth,
						join_dt,
						update_dt,
						mem_grp,
						del_Flag
					)
			 	values
			 	(
			 		bt_member_seq.nextval,
			 		#{id},
			 		#{password},
			 		#{email},
			 		#{tel},
			 		#{phone},
			 		#{address},
			 		#{birthday},
			 		sysdate,
			 		sysdate,
			 		<choose>
			 			<when test="ADMIN">
			 				'ADMIN',	
			 			</when>
			 			<when test="NORMAL">
			 				'NORMAL',
			 			</when>
			 			<when test="COMPANY">
			 				'COMPANY',
			 			</when>
			 			<when test="PRIVATE">
			 				'PRIVATE',
			 			</when>
			 		</choose>
			 		'01'
			 	)
		
	</insert>
	
	<select id="selectMember" parameterType="java.lang.String" resultType="kr.co.bturn.member.model.MemberDTO">
		select /*memberSql.xml selectMember 2015.09.10 이원희 */
			* 
			from 
				bt_member
			where email = #{mem_email} 
	</select>
	
	<update id="updateMember">
		update /*memberSql.xml selectMember 2015.09.10 이원희 */
			bt_member
		<set>
			<if test="password != null">
				password = #{mem_pwd},
			</if>
			<if test="address != null">
				address = #{mem_addr},
			</if>
			<if test="phone != null">
				phone = #{mem_phone},
			</if>
			<if test="birthday != null">
				birthday = #{mem_birth}
			</if>
		</set>
		where email  = #{email}
	</update>
</mapper>