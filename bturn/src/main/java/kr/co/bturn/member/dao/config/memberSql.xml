<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="member.dao.config.memberSql">
	<insert id="insertMember" parameterType="">
		insert into /* memberSql.xml insertMember 2015.09.20 이원희 */
			bt_member
					(
						mem_no,
						mem_id,
						mem_pwd,
						mem_email,
						mem_tel,
						mem_phone,
						mem_addr,
						mem_birth,
						join_dt,
						update_dt,
						mem_type,
						del_Flag
					)
			 	values
			 	(
			 		bt_member_seq.nextval,
			 		#{id},
			 		#{password},
			 		<if test="email != null">
			 			#{email},
			 		</if>
			 		<if test="tel != null">
			 			#{tel},
			 		</if>
			 		<if test="phone != null">
			 			#{phone},
			 		</if>
			 		<if test="address != null">
			 			#{address},
			 		</if>
			 		<if test="birthday != null">
			 			#{birthday},
			 		</if>
			 		sysdate,
			 		sysdate,
			 		<choose>
			 			<when test="ADMIN">
			 				'ADMIN',	
			 			</when>
			 			<when test="PRIVATE_BUYER">
			 				'PRIVATE_BUYER',
			 			</when>
			 			<when test="BUSINESS_BUYER">
			 				'BUSINESS_BUYER'
			 			</when>
			 			<when test="BUSINESS_SEllER">
			 				'BUSINESS_SELLER',
			 			</when>
			 			<when test="PRIVATE_SELLER">
			 				'PRIVATE_SELLER',
			 			</when>
			 		</choose>
			 		'MEMBER'
			 	)		
	</insert>
	
	<select id="selectMember" parameterType="String">
		select /* memberSql.xml selectMember 2015.09.10 이원희 */
			* 
			from bt_member
			where mem_id = #{id}
	</select>
	
	<update id="updateMember" parameterType="String">
		update /*memberSql.xml updateMember 2015.09.10 이원희 */
			bt_member
		<set>
			<if test="password != null">
				mem_pwd = #{password},
			</if>
			<if test="address != null">
				mem_addr = #{address},
			</if>
			<if test="phone != null">
				mem_phone = #{phone},
			</if>
			<if test="birthday != null">
				mem_birth = #{birthday}
			</if>
			<if test="email != null">
				mem_email = #{email}
			</if>
		</set>
		where mem_id  = #{id}
	</update>
	<delete id="deleteMember" parameterType="String">
		delete /*memberSql.xml deleteMember 2015.09.23 이원희 */
			mem_pwd,
			mem_email,
			mem_tel,
			mem_phone,
			mem_addr,
			mem_birth
		from bt_member
		where mem_id = #{id}
	</delete>
	<update id="updateMemberDelteFlag" parameterMap="String">
		update /* memberSql.xml updateMemberDelteFlag 2015.09.23 이원희 */
			bt_member
			<set>
				update_dt = sysdate,
				del_flag = 'DEL_MEMBER'
			</set>
			where mem_id = #{id}
	</update>
</mapper>